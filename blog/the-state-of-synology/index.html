<!DOCTYPE html>
<html lang="en">

<head>
    <meta name="generator" content="Primo" />
    <title>Pulumi > Terraform</title><!-- HEAD_svelte-1pww12a_START -->
    <link rel="shortcut icon" type="image/jpg" sizes="32x32" href="https://kghwomtndmlhmwefzour.supabase.co/storage/v1/object/public/images/4463e179-86de-40c7-9a94-61d251468dc2/1683076594339logo.svg">
    <link rel="preconnect" href="https://fonts.bunny.net">
    <link href="https://fonts.bunny.net/css?family=inter:100,200,300,400,500,600,700,800,900" rel="stylesheet">
    <link href="https://fonts.bunny.net/css?family=merriweather:300,300i,400,400i,700,700i,900,900i" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@shoelace-style/shoelace@2.4.0/dist/themes/light.css">
    <script type="module" src="https://cdn.jsdelivr.net/npm/@shoelace-style/shoelace@2.4.0/dist/shoelace-autoloader.js"></script>
    <link rel="shortcut icon" type="image/jpg" sizes="32x32" href="https://kghwomtndmlhmwefzour.supabase.co/storage/v1/object/public/images/4463e179-86de-40c7-9a94-61d251468dc2/1683076594339logo.svg">
    <meta name="description" content="There can only be one IaC... not really, but really.">
    <meta property="og:image" content="https://images.unsplash.com/photo-1577717707588-58e49821e851?ixlib=rb-4.0.3&amp;ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&amp;auto=format&amp;fit=crop&amp;w=2370&amp;q=80">
    <meta name="twitter:image" content="https://images.unsplash.com/photo-1577717707588-58e49821e851?ixlib=rb-4.0.3&amp;ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&amp;auto=format&amp;fit=crop&amp;w=2370&amp;q=80">
    <style>
        /* Reset & standardize default styles */
        @import url("https://unpkg.com/@primo-app/primo@1.3.64/reset.css") layer;

        /* Design tokens (apply to components) */
        :root {
            /* Custom theme options */
            --color-accent: black;
            --color-accent2: #999999;
            --color-shade: #2d3339;

            --inner-max-width: 800px;

            /* Base values */
            --box-shadow: 0px 2px 8px rgba(0, 0, 0, 0.1);
            --border-radius: 2px;
            --border-color: #e0e1e1;
            --body-font: "Merriweather", serif;
            --heading-font: "Inter", sans-serif;
        }

        /* Root element (use instead of `body`) */
        #page {
            font-family: var(--heading-font);
            color: #111;
            line-height: 1.5;
            font-size: 1.125rem;
            background: white;
        }

        /* Elements */
        .section-container {
            max-width: 1150px;
            margin: 0 auto;
            padding: 5rem 2rem;
        }

        a.link {
            line-height: 1.3;
            border-bottom: 2px solid var(--color-accent);
            transform: translateY(-2px);
            /* move link back into place */
            transition: var(--transition, 0.1s border);
        }

        a.link:hover {
            border-color: transparent;
        }

        .heading {
            font-size: clamp(2rem, 10vw, 3rem);
            line-height: 1.1;
            font-weight: 600;
            letter-spacing: -0.15rem;
        }

        .button {
            color: white;
            background: var(--color-accent, rebeccapurple);
            border-radius: 0;
            padding: 1px 24px;
            transition: var(--transition, 0.1s box-shadow);
            border: 0;
            /* reset */
            border-radius: 0.25rem;
            font-size: 1rem;
        }

        .button:hover {
            box-shadow: 0 0 0 2px var(--color-accent, rebeccapurple);
        }

        .button.inverted {
            background: transparent;
            color: var(--color-accent, rebeccapurple);
        }
    </style><!-- HEAD_svelte-1pww12a_END -->
    <style>
        .section-container.svelte-1qqtbm5.svelte-1qqtbm5 {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding-block: 2rem
        }

        .logo.svelte-1qqtbm5.svelte-1qqtbm5 {
            font-size: 1.5rem;
            font-weight: 600;
            line-height: 1.2;
            width: 50px;
            height: 50px
        }

        .desktop-nav.svelte-1qqtbm5.svelte-1qqtbm5 {
            display: none;
            align-items: center;
            justify-content: space-between;
            width: 100%
        }

        .desktop-nav.svelte-1qqtbm5 nav.svelte-1qqtbm5 {
            display: flex;
            gap: 1.75rem
        }

        .desktop-nav.svelte-1qqtbm5 nav a.link.svelte-1qqtbm5 {
            border-color: transparent;
            transition: border-color 0.1s;
            font-size: 0.95rem;
            font-weight: 500
        }

        .desktop-nav.svelte-1qqtbm5 nav a.link.svelte-1qqtbm5:hover,
        .desktop-nav.svelte-1qqtbm5 nav a.link .active.svelte-1qqtbm5 {
            border-color: initial
        }

        @media(min-width: 800px) {
            .desktop-nav.svelte-1qqtbm5.svelte-1qqtbm5 {
                display: flex
            }
        }

        .mobile-nav.svelte-1qqtbm5.svelte-1qqtbm5 {
            display: flex;
            align-items: center;
            justify-content: space-between;
            width: 100%;
            font-weight: 500
        }

        @media(min-width: 800px) {
            .mobile-nav.svelte-1qqtbm5.svelte-1qqtbm5 {
                display: none
            }
        }

        #popup.svelte-1qqtbm5.svelte-1qqtbm5 {
            font-size: 1.25rem;
            display: grid;
            gap: 1rem;
            position: absolute;
            text-align: center;
            background-color: var(--background-color, white);
            box-shadow: var(--box-shadow, 0px 4px 30px rgba(0, 0, 0, 0.1));
            border-radius: var(--border-radius);
            inset: 0.5rem;
            bottom: initial;
            padding: 2rem;
            z-index: 1
        }

        #popup.svelte-1qqtbm5 button#close.svelte-1qqtbm5 {
            position: absolute;
            right: 1rem;
            top: 1rem
        }

        .section-container.svelte-1b2zbzi {
            display: grid;
            place-items: center;
            padding: 2rem 2rem 1rem 2rem
        }

        .superhead.svelte-1b2zbzi {
            font-size: 1rem;
            color: var(--color-accent2);
            font-weight: 500;
            margin-bottom: 0.5rem
        }

        .heading.svelte-1b2zbzi {
            margin-bottom: 2rem
        }

        @media(min-width:700px) {
            img.svelte-1b2zbzi {
                max-width: 750px
            }
        }

        .section-container.svelte-1tovuol {
            max-width: var(--inner-max-width, 800px);
            padding: 2rem
        }

        .content.svelte-1tovuol img {
            width: 100%;
            margin: 2rem 0;
            box-shadow: var(--box-shadow);
            border-radius: var(--border-radius)
        }

        .content.svelte-1tovuol p {
            padding: 0.25rem 0;
            line-height: 1.5;
            font-family: var(--body-font);
            font-weight: 300;
            margin-bottom: 1rem;
            color: #2d3339
        }

        .content.svelte-1tovuol a {
            text-decoration: underline
        }

        .content.svelte-1tovuol h1 {
            font-size: clamp(1.75rem, 10vw, 2.25rem);
            font-weight: 600;
            letter-spacing: -0.08rem;
            margin-bottom: 1rem;
            line-height: 1.1
        }

        .content.svelte-1tovuol h2 {
            font-size: clamp(1.5rem, 10vw, 2.125rem);
            font-weight: 600;
            margin-bottom: 1rem;
            letter-spacing: -0.06rem;
            line-height: 1.1
        }

        .content.svelte-1tovuol h3 {
            font-size: clamp(1.25rem, 10vw, 1.75rem);
            font-weight: 600;
            margin-bottom: 0.5rem;
            letter-spacing: -0.05rem;
            line-height: 1.1
        }

        .content.svelte-1tovuol ul {
            list-style: disc;
            padding: 0.25rem 0;
            padding-left: 1.25rem
        }

        .content.svelte-1tovuol ol {
            list-style: decimal;
            padding-left: 1.25rem;
            margin-bottom: 2rem
        }

        .content.svelte-1tovuol blockquote {
            padding: 2rem;
            box-shadow: var(--box-shadow);
            border-radius: var(--border-radius)
        }

        .content.svelte-1tovuol pre {
            background-color: #f8f8f8;
            padding: 10px;
            border-radius: 5px
        }

        .content.svelte-1tovuol pre code {
            display: block;
            font-family: 'Courier New', Courier, monospace;
            white-space: pre
        }

        .content.svelte-1tovuol p code {
            background-color: #f8f8f8;
            padding: 2px;
            border-radius: 3px;
            font-family: 'Courier New', Courier, monospace
        }

        .content.svelte-1tovuol span code {
            background-color: #f8f8f8;
            padding: 2px;
            border-radius: 3px;
            font-family: 'Courier New', Courier, monospace
        }

        .section-container.svelte-1excgdw.svelte-1excgdw {
            padding: 2rem 2rem 1rem 2rem
        }

        hr.svelte-1excgdw.svelte-1excgdw {
            border-color: #F2F2F2
        }

        .footer.svelte-1excgdw.svelte-1excgdw {
            display: flex;
            justify-content: space-between;
            flex-direction: start column;
            gap: 1rem;
            padding-top: 1rem;
            padding-bottom: 1rem
        }

        .copyright.svelte-1excgdw.svelte-1excgdw {
            font-size: 0.75rem;
            color: var(--color-text-secondary, #2D3339)
        }

        ul.svelte-1excgdw.svelte-1excgdw {
            display: flex;
            gap: 1.5rem;
            font-size: 1.5rem;
            list-style: none
        }

        ul.svelte-1excgdw a.svelte-1excgdw {
            transition: var(--transition)
        }

        ul.svelte-1excgdw a.svelte-1excgdw:hover {
            color: var(--color-accent)
        }

        @media(min-width: 600px) {
            ul.svelte-1excgdw.svelte-1excgdw {
                font-size: 1.25rem
            }
        }
    </style>
</head>

<body id="page">

    <div class="section" id="section-a9620b69">
        <header class="section-container svelte-1qqtbm5">
            <div class="desktop-nav svelte-1qqtbm5"><a href="/" class="logo svelte-1qqtbm5"><img src="https://kghwomtndmlhmwefzour.supabase.co/storage/v1/object/public/images/4463e179-86de-40c7-9a94-61d251468dc2/1683076594339logo.svg" alt=""></a>
                <nav class="svelte-1qqtbm5"><a class="link svelte-1qqtbm5" href="/">Home</a><a class="link svelte-1qqtbm5" href="/blog">Blog</a><a class="link svelte-1qqtbm5" href="/about">About</a></nav>
            </div>
            <div class="mobile-nav svelte-1qqtbm5"><a href="/" class="logo svelte-1qqtbm5"><img src="https://kghwomtndmlhmwefzour.supabase.co/storage/v1/object/public/images/4463e179-86de-40c7-9a94-61d251468dc2/1683076594339logo.svg" alt=""></a>
                <button id="open" aria-label="Open mobile navigation"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden role="img" width="30" height="30" viewBox="0 0 24 24" class="iconify iconify--eva"><!-- HTML_TAG_START -->
                        <g id="iconifySvelte0">
                            <g id="iconifySvelte1">
                                <g id="iconifySvelte2" fill="currentColor">
                                    <rect width="18" height="2" x="3" y="11" rx=".95" ry=".95" />
                                    <rect width="18" height="2" x="3" y="16" rx=".95" ry=".95" />
                                    <rect width="18" height="2" x="3" y="6" rx=".95" ry=".95" />
                                </g>
                            </g>
                        </g><!-- HTML_TAG_END -->
                    </svg></button>
            </div>
        </header>
    </div>
    <div class="section" id="section-c270172b">
        <header class="section-container svelte-1b2zbzi"><span class="superhead svelte-1b2zbzi">JULY 23, 2023 </span>
            <h1 class="heading svelte-1b2zbzi">The State of Synology</h1>
            <img src="https://kghwomtndmlhmwefzour.supabase.co/storage/v1/object/public/images/4463e179-86de-40c7-9a94-61d251468dc2/1690040661822synology.png" alt="" class="svelte-1b2zbzi">
        </header>
    </div>
    <div class="section" id="section-ceba82b6">
        <div class="section">
            <div class="section-container content svelte-1tovuol"><!-- HTML_TAG_START -->
                <p>I think it was around 2014 or 2015 when Synology got on my radar. Having never even seen the operating system yet, I was already in love with the form factor. This was before I had a 42U server rack in my house, so it seemed like the perfect little device for storing my data. But I was also fairly new to the workforce, and fairly new to being married, and trying to save up to buy a house, and a Synology (plus hard drives) was a bit out of reach. I took the long way around. I could talk all day about the several devices that came and went before 2018, but let's not go down that rabbit hole. A 42U server rack came and went along with several machines, and then I finally made my dream come true. I started off with a DS918+, and I couldn't have been happier. I had helped my friend Nate with his Synology several times at that point (you're welcome, Nate), and I knew it was what I wanted. So I bought the unit, threw in 4x 2TB WD Reds (CMR), and I was off to the races. It was great. It handled DDNS, it was a VPN server, it had Docker, and it had Let's Encrypt. That's totally ignoring their amazing suite of apps including Synology Drive, Synology Office, DS Video, DS Photo (now Synology Photos), and a number of others. The people that developed DSM had thought of it all, and I was so happy with the ease of use. I was so happy that I even upgraded to the DS1821+.</p>
                <p>But…</p>
                <p>We both grew up, and we started to grow apart. Even before I upgraded to the DS1821+, there was growing tension between DSM and I. I wanted more out of my Synology, and it was frustrating because it was Synology that was stopping me from doing more. It started with the SSL certificates. If you want to use a wildcard certificate, you could only do so with Synology's pre-loaded domain, not your custom domain. I still don't understand why they would implement a limitation like that, but it forced me to find a work around. Eventually, I settled on the <a href="https://fleet.linuxserver.io/image?name=linuxserver/swag">SWAG Docker container from LinuxServer.io</a>. This solved my problem with my SSL certificate, but it also forced me to do two things I didn't really want to do: ditch Synology's built-in reverse proxy, and write a ton of little Nginx config files. The built-in reverse proxy doesn't support any advanced configuration, but it was doing the trick, and SWAG container was more work than I was hoping to have to put in. Fortunately, I later learned about <a href="https://nginxproxymanager.com/">NGINX Proxy Manager</a>, but as you probably expected, that wasn't without its issues either.</p>
                <p>NGINX Proxy Manager (NPM) is a dream come true as far as setting up a reverse proxy and an SSL certificate. It couldn't be easier… except that Synology reserves port 80 and port 443 for its own uses. I could have used different ports, and then re-routed all port 80 and 443 requests on my router to the different ports on the Synology, but I didn't want to, nor should I have had to. So after a brief tinkering, I moved Synology's reserved ports from 80 and 443 to 81 and 444, respectively, and NPM was working like a dream. This breaks every time I update my Synology though, so maybe I should have used different ports.</p>
                <p>Perhaps my biggest frustration was with Docker. I haven't used Synology's on-board Docker UI in years because it's broken. By "broken", I mean that I am using features that are not supported by it. Instead of it just ignoring those features, it prevents the UI from working correctly. And should I make a change in the UI, it will fail to maintain the unsupported configuration, thus breaking my containers. Quite simply, if you want to do anything other than use a bridge or host network, you will break the UI. So when I wanted to use one container as a VPN gateway for another container, it broke the UI. When I wanted to use a Macvlan network to give a container its own local IP address, it broke the UI. I was using the CLI for most of this anyway, but it would have been nice to be able to use the UI to monitor my containers. I have been using <a href="https://www.portainer.io/">Portainer</a> for the past few years, and it has been great. It even solves the other major issue that Synology forced on its users regarding Docker: the API. Synology crippled the power user experience of Docker by locking down the API and making it inaccessible. Portainer has its own API, so if you use it to manage your containers, then you have a pretty easy work around.</p>
                <p>I mentioned previously how I wanted to use a container as a VPN gateway for another container. This was easier said than done. As expected, this docker configuration broke the Docker UI, but it also just didn't work. The reason it didn't work was because the TUN kernel module wasn't loaded. I had to set up a scheduled task to load the TUN kernel module on boot. And yes, it has to run on boot, because every time you restart your Synology, that configuration does not persist.</p>
                <p>I feel like I have illustrated my point. DSM7.2 came out recently, and it has a new Docker UI called "Container Manager". I will never know if it works though, because I use containers as network devices, and I use Macvlan networks, and I don't want to end up having to fix all of my configuration just because I wanted to see if Synology stopped nerfing the Docker experience.</p>
                <p>I know that these things I'm trying to do aren't supported. I know that I am pushing the limits of what the device is capable of. What I don't understand is why Synology would deliberately get in my way and prevent me from doing these things though. The first time you SSH into your Synology, you get a warning. Other than that, it lets you do what you want. Why can't I just have a warning. Just warn me that I exposed my Docker API, or warn me that Macvlan networks are unsupported. I'm not suggesting that Synology make changes to their platform to accommodate these extended use cases, but I think they should stay out of the way. Even MacOS doesn't get in the way when I want to do things it doesn't like.</p>
                <p>Ultimately, the DS1821+ will be my last Synology. They are continuing to tighten things up, and are working toward vendor lock-in, and it's not sitting well with me. A number of the features and functions I wanted to use the most in DSM are seemingly only half-baked, and they were not robust enough solutions to prevent me from needing to use 3rd party applications. I cannot imagine upgrading to a more expensive, more powerful device only to have these same problems, and then also being forced into buying their brand-name, prohibitively expensive hard drives as well. Synology seems to be entering this weird place where they are pricing themselves out of home labs, and nerfing their features so they could never be used in an enterprise environment. Maybe small business is where the money's at?</p><!-- HTML_TAG_END -->
            </div>
        </div>
    </div>
    <div class="section" id="section-4a4ccaf6">
        <footer>
            <div class="section-container svelte-1excgdw">
                <hr class="svelte-1excgdw">
                <div class="footer svelte-1excgdw"><span class="copyright svelte-1excgdw">Copyright 2023</span>
                    <ul class="svelte-1excgdw">
                        <li><a href="https://twitter.com" aria-label="mdi:twitter" class="svelte-1excgdw"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden role="img" width="1em" height="1em" viewBox="0 0 24 24" class="iconify iconify--mdi"><!-- HTML_TAG_START -->
                                    <path fill="currentColor" d="M22.46 6c-.77.35-1.6.58-2.46.69c.88-.53 1.56-1.37 1.88-2.38c-.83.5-1.75.85-2.72 1.05C18.37 4.5 17.26 4 16 4c-2.35 0-4.27 1.92-4.27 4.29c0 .34.04.67.11.98C8.28 9.09 5.11 7.38 3 4.79c-.37.63-.58 1.37-.58 2.15c0 1.49.75 2.81 1.91 3.56c-.71 0-1.37-.2-1.95-.5v.03c0 2.08 1.48 3.82 3.44 4.21a4.22 4.22 0 0 1-1.93.07a4.28 4.28 0 0 0 4 2.98a8.521 8.521 0 0 1-5.33 1.84c-.34 0-.68-.02-1.02-.06C3.44 20.29 5.7 21 8.12 21C16 21 20.33 14.46 20.33 8.79c0-.19 0-.37-.01-.56c.84-.6 1.56-1.36 2.14-2.23Z" /><!-- HTML_TAG_END -->
                                </svg></a>
                        </li>
                        <li><a href="https://github.com" aria-label="mdi:github" class="svelte-1excgdw"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden role="img" width="1em" height="1em" viewBox="0 0 24 24" class="iconify iconify--mdi"><!-- HTML_TAG_START -->
                                    <path fill="currentColor" d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5c.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34c-.46-1.16-1.11-1.47-1.11-1.47c-.91-.62.07-.6.07-.6c1 .07 1.53 1.03 1.53 1.03c.87 1.52 2.34 1.07 2.91.83c.09-.65.35-1.09.63-1.34c-2.22-.25-4.55-1.11-4.55-4.92c0-1.11.38-2 1.03-2.71c-.1-.25-.45-1.29.1-2.64c0 0 .84-.27 2.75 1.02c.79-.22 1.65-.33 2.5-.33c.85 0 1.71.11 2.5.33c1.91-1.29 2.75-1.02 2.75-1.02c.55 1.35.2 2.39.1 2.64c.65.71 1.03 1.6 1.03 2.71c0 3.82-2.34 4.66-4.57 4.91c.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z" /><!-- HTML_TAG_END -->
                                </svg></a>
                        </li>
                    </ul>
                </div>
            </div>
        </footer>
    </div>

    <script type="module">
        const path = window.location.pathname === '/' ? '' : window.location.pathname
        const [{
            default: App
        }] = await Promise.all([
            import(path + '/_module.js')
        ]).catch(e => console.error(e))
        new App({
            target: document.querySelector('body'),
            hydrate: true,
        })
    </script>
</body>

</html>